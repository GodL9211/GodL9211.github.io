import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as c,c as l,a as e,b as s,e as a,f as o}from"./app-967d79b2.js";const d={},r=o('<h1 id="rest-framework专栏讲解-四-status" tabindex="-1"><a class="header-anchor" href="#rest-framework专栏讲解-四-status" aria-hidden="true">#</a> Rest-framework专栏讲解(四)：Status</h1><h2 id="目录" tabindex="-1"><a class="header-anchor" href="#目录" aria-hidden="true">#</a> 目录</h2><ul><li><a href="#%E7%8A%B6%E6%80%81%E7%A0%81">状态码</a><ul><li><a href="#%E4%BF%A1%E6%81%AF---1xx">信息 - 1xx</a></li><li><a href="#%E6%88%90%E5%8A%9F---2xx">成功 - 2xx</a></li><li><a href="#%E9%87%8D%E5%AE%9A%E5%90%91---3xx">重定向 - 3xx</a></li><li><a href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF---4xx">客户端错误 - 4xx</a></li><li><a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%94%99%E8%AF%AF---5xx">服务器错误 - 5xx</a></li><li><a href="#%E5%B8%AE%E5%8A%A9%E5%87%BD%E6%95%B0">帮助函数</a></li></ul></li></ul><hr>',4),_={href:"http://www.django-rest-framework.org/api-guide/status-codes/",title:"官方原文链接",target:"_blank",rel:"noopener noreferrer"},p={id:"状态码",tabindex:"-1"},u=e("a",{class:"header-anchor",href:"#状态码","aria-hidden":"true"},"#",-1),T={href:"http://drf.jiuyou.info/#/drf/status-codes?id=%E7%8A%B6%E6%80%81%E7%A0%81",title:"状态码",target:"_blank",rel:"noopener noreferrer"},E=o(`<p>不建议在你的响应中使用裸露（直接使用数字）的状态码。 REST framework 包含一组命名常量，你可以使用它们使代码更加清晰易读。</p><p>在请求中我们会用到和种各样的请求状态码, 如果你查阅过文档, 会在首行看到这样一条信息：</p><blockquote><p>Using bare status codes in your responses isn&#39;t recommended. REST framework includes a set of named constants that you can use to make your code more obvious and readable.</p></blockquote><p>是的, 使用框架自带的状态码能更清晰的表达这个请求的相应内容以及错误信息, 你只需要这样导入进来就可以使用了：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># _*_ coding: UTF-8 _*_</span>
<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> status
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>response <span class="token keyword">import</span> Response

<span class="token keyword">def</span> <span class="token function">empty_view</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    content <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&#39;please move along&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;nothing to see here&#39;</span><span class="token punctuation">}</span>
    <span class="token keyword">return</span> Response<span class="token punctuation">(</span>content<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">.</span>HTTP_404_NOT_FOUND<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面列出了 status 模块中包含的全部 HTTP 状态码。</p><p>该模块还包含一组帮助函数，用于测试状态码是否在给定范围内。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> status
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>test <span class="token keyword">import</span> APITestCase

<span class="token keyword">class</span> <span class="token class-name">ExampleTestCase</span><span class="token punctuation">(</span>APITestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">test_url_root</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> reverse<span class="token punctuation">(</span><span class="token string">&#39;index&#39;</span><span class="token punctuation">)</span>
        response <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span>status<span class="token punctuation">.</span>is_success<span class="token punctuation">(</span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),k={id:"信息-1xx",tabindex:"-1"},h=e("a",{class:"header-anchor",href:"#信息-1xx","aria-hidden":"true"},"#",-1),x={href:"http://drf.jiuyou.info/#/drf/status-codes?id=%E4%BF%A1%E6%81%AF-1xx",title:"信息 - 1xx",target:"_blank",rel:"noopener noreferrer"},m=e("p",null,"这类状态码表示临时响应。默认情况下，REST framework 中没有使用 1xx 状态码。",-1),A=e("ul",null,[e("li",null,[e("code",null,"HTTP_100_CONTINUE")]),e("li",null,[e("code",null,"HTTP_101_SWITCHING_PROTOCOLS")])],-1),f={id:"成功-2xx",tabindex:"-1"},P=e("a",{class:"header-anchor",href:"#成功-2xx","aria-hidden":"true"},"#",-1),v={href:"http://drf.jiuyou.info/#/drf/status-codes?id=%E6%88%90%E5%8A%9F-2xx",title:"成功 - 2xx",target:"_blank",rel:"noopener noreferrer"},H=o("<p>这类状态码表明客户端的请求已被成功接收，理解和接受。</p><ul><li><code>HTTP_200_OK</code></li><li><code>HTTP_201_CREATED</code></li><li><code>HTTP_202_ACCEPTED</code></li><li><code>HTTP_203_NON_AUTHORITATIVE_INFORMATION</code></li><li><code>HTTP_204_NO_CONTENT</code></li><li><code>HTTP_205_RESET_CONTENT</code></li><li><code>HTTP_206_PARTIAL_CONTENT</code></li><li><code>HTTP_207_MULTI_STATUS</code></li><li><code>HTTP_208_ALREADY_REPORTED</code></li><li><code>HTTP_226_IM_USED</code></li></ul>",2),R={id:"重定向-3xx",tabindex:"-1"},N=e("a",{class:"header-anchor",href:"#重定向-3xx","aria-hidden":"true"},"#",-1),O={href:"http://drf.jiuyou.info/#/drf/status-codes?id=%E9%87%8D%E5%AE%9A%E5%90%91-3xx",title:"重定向 - 3xx",target:"_blank",rel:"noopener noreferrer"},I=o("<p>这类状态码表明用户代理需要采取进一步行动来完成请求。</p><ul><li><code>HTTP_300_MULTIPLE_CHOICES</code></li><li><code>HTTP_301_MOVED_PERMANENTLY</code></li><li><code>HTTP_302_FOUND</code></li><li><code>HTTP_303_SEE_OTHER</code></li><li><code>HTTP_304_NOT_MODIFIED</code></li><li><code>HTTP_305_USE_PROXY</code></li><li><code>HTTP_306_RESERVED</code></li><li><code>HTTP_307_TEMPORARY_REDIRECT</code></li><li><code>HTTP_308_PERMANENT_REDIRECT</code></li></ul>",2),b={id:"客户端错误-4xx",tabindex:"-1"},D=e("a",{class:"header-anchor",href:"#客户端错误-4xx","aria-hidden":"true"},"#",-1),S={href:"http://drf.jiuyou.info/#/drf/status-codes?id=%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%94%99%E8%AF%AF-4xx",title:"客户端错误 - 4xx",target:"_blank",rel:"noopener noreferrer"},U=o("<p>4xx 状态码适用于客户端出现错误的情况。除了响应 HEAD 请求之外，服务器应该包含一个错误情况说明的实体，以及它是临时的还是永久的。</p><ul><li><code>HTTP_400_BAD_REQUEST</code></li><li><code>HTTP_401_UNAUTHORIZED</code></li><li><code>HTTP_402_PAYMENT_REQUIRED</code></li><li><code>HTTP_403_FORBIDDEN</code></li><li><code>HTTP_404_NOT_FOUND</code></li><li><code>HTTP_405_METHOD_NOT_ALLOWED</code></li><li><code>HTTP_406_NOT_ACCEPTABLE</code></li><li><code>HTTP_407_PROXY_AUTHENTICATION_REQUIRED</code></li><li><code>HTTP_408_REQUEST_TIMEOUT</code></li><li><code>HTTP_409_CONFLICT</code></li><li><code>HTTP_410_GONE</code></li><li><code>HTTP_411_LENGTH_REQUIRED</code></li><li><code>HTTP_412_PRECONDITION_FAILED</code></li><li><code>HTTP_413_REQUEST_ENTITY_TOO_LARGE</code></li><li><code>HTTP_414_REQUEST_URI_TOO_LONG</code></li><li><code>HTTP_415_UNSUPPORTED_MEDIA_TYPE</code></li><li><code>HTTP_416_REQUESTED_RANGE_NOT_SATISFIABLE</code></li><li><code>HTTP_417_EXPECTATION_FAILED</code></li><li><code>HTTP_422_UNPROCESSABLE_ENTITY</code></li><li><code>HTTP_423_LOCKED</code></li><li><code>HTTP_424_FAILED_DEPENDENCY</code></li><li><code>HTTP_426_UPGRADE_REQUIRED</code></li><li><code>HTTP_428_PRECONDITION_REQUIRED</code></li><li><code>HTTP_429_TOO_MANY_REQUESTS</code></li><li><code>HTTP_431_REQUEST_HEADER_FIELDS_TOO_LARGE</code></li><li><code>HTTP_451_UNAVAILABLE_FOR_LEGAL_REASONS</code></li></ul>",2),y={id:"服务器错误-5xx",tabindex:"-1"},g=e("a",{class:"header-anchor",href:"#服务器错误-5xx","aria-hidden":"true"},"#",-1),C={href:"http://drf.jiuyou.info/#/drf/status-codes?id=%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%94%99%E8%AF%AF-5xx",title:"服务器错误 - 5xx",target:"_blank",rel:"noopener noreferrer"},L=o("<p>5xx 表示服务器意识到其发生错误或无法执行请求的情况。除了响应 HEAD 请求之外，服务器应该包含一个错误情况说明的实体，以及它是临时的还是永久的。</p><ul><li><code>HTTP_500_INTERNAL_SERVER_ERROR</code></li><li><code>HTTP_501_NOT_IMPLEMENTED</code></li><li><code>HTTP_502_BAD_GATEWAY</code></li><li><code>HTTP_503_SERVICE_UNAVAILABLE</code></li><li><code>HTTP_504_GATEWAY_TIMEOUT</code></li><li><code>HTTP_505_HTTP_VERSION_NOT_SUPPORTED</code></li><li><code>HTTP_506_VARIANT_ALSO_NEGOTIATES</code></li><li><code>HTTP_507_INSUFFICIENT_STORAGE</code></li><li><code>HTTP_508_LOOP_DETECTED</code></li><li><code>HTTP_509_BANDWIDTH_LIMIT_EXCEEDED</code></li><li><code>HTTP_510_NOT_EXTENDED</code></li><li><code>HTTP_511_NETWORK_AUTHENTICATION_REQUIRED</code></li></ul>",2),F={id:"帮助函数",tabindex:"-1"},w=e("a",{class:"header-anchor",href:"#帮助函数","aria-hidden":"true"},"#",-1),B={href:"http://drf.jiuyou.info/#/drf/status-codes?id=%E5%B8%AE%E5%8A%A9%E5%87%BD%E6%95%B0",title:"帮助函数",target:"_blank",rel:"noopener noreferrer"},M=o(`<p>以下帮助函数可用于识别响应代码的类别。</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>is_informational<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment"># 1xx 返回是否 1 开头状态码的布尔值</span>
is_success<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># 2xx 返回是否 2 开头状态码的布尔值</span>
is_redirect<span class="token punctuation">(</span><span class="token punctuation">)</span>           <span class="token comment"># 3xx 返回是否 3 开头状态码的布尔值</span>
is_client_error<span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment"># 4xx 返回是否 4 开头状态码的布尔值</span>
is_server_error<span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token comment"># 5xx 返回是否 5 开头状态码的布尔值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>例如：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">#!/usr/bin/env python</span>
<span class="token comment"># _*_ coding: UTF-8 _*_</span>
<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> status

status<span class="token punctuation">.</span>is_success<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>  <span class="token comment"># 返回 True</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4);function G(Q,V){const n=i("ExternalLinkIcon");return c(),l("div",null,[r,e("blockquote",null,[e("p",null,[e("a",_,[s("官方原文链接"),a(n)])])]),e("h1",p,[u,s(),e("a",T,[s("状态码"),a(n)])]),E,e("h2",k,[h,s(),e("a",x,[s("信息 - 1xx"),a(n)])]),m,A,e("h2",f,[P,s(),e("a",v,[s("成功 - 2xx"),a(n)])]),H,e("h2",R,[N,s(),e("a",O,[s("重定向 - 3xx"),a(n)])]),I,e("h2",b,[D,s(),e("a",S,[s("客户端错误 - 4xx"),a(n)])]),U,e("h2",y,[g,s(),e("a",C,[s("服务器错误 - 5xx"),a(n)])]),L,e("h2",F,[w,s(),e("a",B,[s("帮助函数"),a(n)])]),M])}const W=t(d,[["render",G],["__file","Rest-framework专栏讲解(四)：Status.html.vue"]]);export{W as default};
