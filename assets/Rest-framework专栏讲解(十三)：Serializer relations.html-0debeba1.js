import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as l,c as i,a as n,b as s,e,f as t}from"./app-7702e136.js";const c={},r=t('<h1 id="rest-frameworkä¸“æ è®²è§£-åä¸‰-serializer-relations" tabindex="-1"><a class="header-anchor" href="#rest-frameworkä¸“æ è®²è§£-åä¸‰-serializer-relations" aria-hidden="true">#</a> Rest-frameworkä¸“æ è®²è§£(åä¸‰)ï¼šSerializer relations</h1><h2 id="ç›®å½•" tabindex="-1"><a class="header-anchor" href="#ç›®å½•" aria-hidden="true">#</a> ç›®å½•</h2><ul><li><a href="#Serializer-%E5%85%B3%E7%B3%BB">Serializer å…³ç³»</a><ul><li><a href="#%E6%A3%80%E6%9F%A5%E5%85%B3%E7%B3%BB">æ£€æŸ¥å…³ç³»ã€‚</a></li></ul></li><li><a href="#API-%E5%8F%82%E8%80%83">API å‚è€ƒ</a><ul><li><a href="#StringRelatedField">StringRelatedField</a></li><li><a href="#PrimaryKeyRelatedField">PrimaryKeyRelatedField</a></li><li><a href="#HyperlinkedRelatedField">HyperlinkedRelatedField</a></li><li><a href="#SlugRelatedField">SlugRelatedField</a></li><li><a href="#HyperlinkedIdentityField">HyperlinkedIdentityField</a></li><li><a href="#%E5%B5%8C%E5%A5%97%E5%85%B3%E7%B3%BBNested-relationships">åµŒå¥—å…³ç³»(Nested relationships)</a></li><li><a href="#%E4%B8%BE%E4%B8%AA%E6%A0%97%E5%AD%90">ä¸¾ä¸ªæ —å­</a><ul><li><a href="#%E5%8F%AF%E5%86%99%E7%9A%84%E5%B5%8C%E5%A5%97-serializerWritable-nested-serializers">å¯å†™çš„åµŒå¥— serializer(Writable nested serializers)</a></li></ul></li></ul></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%B3%E7%B3%BB%E5%AD%97%E6%AE%B5">è‡ªå®šä¹‰å…³ç³»å­—æ®µ</a><ul><li><a href="#%E4%B8%BE%E4%B8%AA%E6%A0%97%E5%AD%90">ä¸¾ä¸ªæ —å­</a></li></ul></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B6%85%E9%93%BE%E6%8E%A5%E5%AD%97%E6%AE%B5">è‡ªå®šä¹‰è¶…é“¾æ¥å­—æ®µ</a><ul><li><a href="#%E4%B8%BE%E4%B8%AA%E6%A0%97%E5%AD%90">ä¸¾ä¸ªæ —å­</a></li></ul></li><li><a href="#%E8%BF%9B%E4%B8%80%E6%AD%A5%E8%AF%B4%E6%98%8E">è¿›ä¸€æ­¥è¯´æ˜</a><ul><li><a href="#queryset-%E5%8F%82%E6%95%B0">queryset å‚æ•°</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89-HTML-%E6%98%BE%E7%A4%BA">è‡ªå®šä¹‰ HTML æ˜¾ç¤º</a></li><li><a href="#Select-field-cutoffs">Select field cutoffs</a></li><li><a href="#%E5%8F%8D%E5%90%91%E5%85%B3%E7%B3%BB">åå‘å…³ç³»</a></li><li><a href="#%E9%80%9A%E7%94%A8%E5%85%B3%E7%B3%BB">é€šç”¨å…³ç³»</a></li><li><a href="#%E5%85%B7%E6%9C%89-Through-%E6%A8%A1%E5%9E%8B%E7%9A%84-ManyToManyFields">å…·æœ‰ Through æ¨¡å‹çš„ ManyToManyFields</a></li></ul></li></ul><hr>',4),u={href:"http://www.django-rest-framework.org/api-guide/relations/",title:"å®˜æ–¹åŸæ–‡é“¾æ¥",target:"_blank",rel:"noopener noreferrer"},d={id:"serializer-å…³ç³»",tabindex:"-1"},k=n("a",{class:"header-anchor",href:"#serializer-å…³ç³»","aria-hidden":"true"},"#",-1),v={href:"http://drf.jiuyou.info/#/drf/relations?id=serializer-%E5%85%B3%E7%B3%BB",title:"Serializer å…³ç³»",target:"_blank",rel:"noopener noreferrer"},m=t("<p>å…³ç³»å­—æ®µç”¨äºè¡¨ç¤ºæ¨¡å‹å…³ç³»çš„æ•°æ®å­—æ®µ, å®ƒä»¬å¯ä»¥åº”ç”¨åˆ° <code>ForeignKey</code>ã€<code>ManyToManyField</code> å’Œ <code>OneToOneField</code>å…³ç³», ä»¥åŠå¯¹åå‘å…³ç³»ã€è‡ªå®šä¹‰å…³ç³»ç­‰, ä¾‹å¦‚ï¼š<code>GenericForeignKey</code>ã€‚</p><blockquote><p><strong>æ³¨æ„ï¼š</strong> å…³ç³»å­—æ®µåœ¨ <code>relations.py</code> ä¸­å£°æ˜ï¼Œä½†æŒ‰ç…§æƒ¯ä¾‹ï¼Œä½ åº”è¯¥ä» <code>serializers</code> æ¨¡å—å¯¼å…¥å®ƒä»¬ï¼Œä½¿ç”¨ <code>from rest_framework import serializers</code> å¼•å…¥ï¼Œå¹¶åƒ <code>serializers.&lt;FieldName&gt;</code> è¿™æ ·å¼•ç”¨å­—æ®µã€‚</p></blockquote>",2),b={id:"æ£€æŸ¥å…³ç³»ã€‚",tabindex:"-1"},g=n("a",{class:"header-anchor",href:"#æ£€æŸ¥å…³ç³»ã€‚","aria-hidden":"true"},"#",-1),h={href:"http://drf.jiuyou.info/#/drf/relations?id=%E6%A3%80%E6%9F%A5%E5%85%B3%E7%B3%BB%E3%80%82",title:"æ£€æŸ¥å…³ç³»ã€‚",target:"_blank",rel:"noopener noreferrer"},_=t(`<p>åœ¨ä½¿ç”¨ <code>ModelSerializer</code> ç±»æ—¶ï¼Œå°†è‡ªåŠ¨ä¸ºä½ ç”Ÿæˆåºåˆ—åŒ–å­—æ®µå’Œå…³ç³»ã€‚æ£€æŸ¥è¿™äº›è‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µå¯ä»¥å­¦ä¹ å¦‚ä½•å®šåˆ¶å…³ç³»é£æ ¼ã€‚</p><p>ä¸ºæ­¤ï¼Œä½¿ç”¨ <code>python manage.py shell</code> æ‰“å¼€ Django shellï¼Œç„¶åå¯¼å…¥åºåˆ—åŒ–ç±»ï¼Œå®ä¾‹åŒ–å®ƒå¹¶æ‰“å°å¯¹è±¡è¡¨ç¤ºå½¢å¼...</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> myapp<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> AccountSerializer
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer <span class="token operator">=</span> AccountSerializer<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>serializer<span class="token punctuation">)</span>  <span class="token comment"># Or \`print(repr(serializer))\` in Python 3.x.</span>
AccountSerializer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">&#39;ID&#39;</span><span class="token punctuation">,</span> read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    name <span class="token operator">=</span> CharField<span class="token punctuation">(</span>allow_blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    owner <span class="token operator">=</span> PrimaryKeyRelatedField<span class="token punctuation">(</span>queryset<span class="token operator">=</span>User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),y={id:"api-å‚è€ƒ",tabindex:"-1"},f=n("a",{class:"header-anchor",href:"#api-å‚è€ƒ","aria-hidden":"true"},"#",-1),E={href:"http://drf.jiuyou.info/#/drf/relations?id=api-%E5%8F%82%E8%80%83",title:"API å‚è€ƒ",target:"_blank",rel:"noopener noreferrer"},A=t(`<p>ä¸ºäº†è§£é‡Šå„ç§ç±»å‹çš„å…³ç³»å­—æ®µï¼Œæˆ‘ä»¬å°†ä¸ºæˆ‘ä»¬çš„ç¤ºä¾‹ä½¿ç”¨å‡ ä¸ªç®€å•çš„æ¨¡å‹ã€‚æˆ‘ä»¬çš„æ¨¡å‹å°†ä½¿ç”¨éŸ³ä¹ä¸“è¾‘ï¼Œä»¥åŠæ¯å¼ ä¸“è¾‘ä¸­åˆ—å‡ºçš„æ›²ç›®ã€‚</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Album</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    album_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    artist <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Track</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    album <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>Album<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">&#39;tracks&#39;</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>
    order <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    title <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    duration <span class="token operator">=</span> models<span class="token punctuation">.</span>IntegerField<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        unique_together <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;album&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;order&#39;</span><span class="token punctuation">]</span>
        ordering <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;order&#39;</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&#39;%d: %s&#39;</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>order<span class="token punctuation">,</span> self<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="stringrelatedfield" tabindex="-1"><a class="header-anchor" href="#stringrelatedfield" aria-hidden="true">#</a> StringRelatedField</h3><p><code>StringRelatedField</code> ç”¨äºä½¿ç”¨ <code>__unicode__</code> æ–¹æ³•è¡¨ç¤ºå…³ç³»ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„åºåˆ—åŒ–ç±»ã€‚</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> serializers<span class="token punctuation">.</span>StringRelatedField<span class="token punctuation">(</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;album_name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;artist&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†åºåˆ—åŒ–ä¸ºä»¥ä¸‹å½¢å¼:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">&#39;album_name&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Things We Lost In The Fire&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;artist&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Low&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;1: Sunflower&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;2: Whitetail&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;3: Dinosaur Act&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ğŸè¯¥å­—æ®µæ˜¯åªè¯»çš„ã€‚</p></blockquote><p><strong>å‚æ•°</strong>:</p><ul><li><code>many</code> - å¦‚æœæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œå°±å°†æ­¤å‚æ•°è®¾ç½®ä¸º <code>True</code>.</li></ul><h3 id="primarykeyrelatedfield" tabindex="-1"><a class="header-anchor" href="#primarykeyrelatedfield" aria-hidden="true">#</a> PrimaryKeyRelatedField</h3><p><code>PrimaryKeyRelatedField</code> ç”¨äºä½¿ç”¨å…¶ä¸»é”®è¡¨ç¤ºå…³ç³»ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹åºåˆ—åŒ–ç±»ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> serializers<span class="token punctuation">.</span>PrimaryKeyRelatedField<span class="token punctuation">(</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;album_name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;artist&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†åºåˆ—åŒ–ä¸ºè¿™æ ·çš„è¡¨ç¤ºï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">&#39;album_name&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Undun&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;artist&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;The Roots&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token number">89</span><span class="token punctuation">,</span>
        <span class="token number">90</span><span class="token punctuation">,</span>
        <span class="token number">91</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å­—æ®µæ˜¯å¯è¯»å†™çš„ï¼Œä½†æ‚¨å¯ä»¥ä½¿ç”¨ <code>read_only</code> æ ‡å¿—æ›´æ”¹æ­¤è¡Œä¸ºã€‚</p><p><strong>å‚æ•°</strong>:</p><ul><li><code>queryset</code> - éªŒè¯å­—æ®µè¾“å…¥æ—¶ç”¨äºæ¨¡å‹å®ä¾‹æŸ¥è¯¢çš„æŸ¥è¯¢é›†ã€‚å¿…é¡»æ˜¾å¼åœ°è®¾ç½®æŸ¥è¯¢é›†ï¼Œæˆ–è®¾ç½® <code>read_only=True</code>ã€‚</li><li><code>many</code> - å¦‚æœåº”ç”¨äºä¸€å¯¹å¤šå…³ç³»ï¼Œåˆ™åº”å°†æ­¤å‚æ•°è®¾ç½®ä¸º <code>True</code>ã€‚</li><li><code>allow_null</code> - å¦‚æœè®¾ç½®ä¸º <code>True</code>ï¼Œé‚£ä¹ˆè¯¥å­—æ®µå°†æ¥å— <code>None</code> å€¼æˆ–å¯ä¸ºç©ºçš„å…³ç³»çš„ç©ºå­—ç¬¦ä¸²ã€‚é»˜è®¤ä¸º <code>False</code>ã€‚</li><li><code>pk_field</code> - è®¾ç½®ä¸ºä¸€ä¸ªå­—æ®µæ¥æ§åˆ¶ä¸»é”®å€¼çš„åºåˆ—åŒ–/ååºåˆ—åŒ–ã€‚ä¾‹å¦‚ï¼Œ <code>pk_field=UUIDField(format=&#39;hex&#39;)</code> ä¼šå°† UUID ä¸»é”®åºåˆ—åŒ–ä¸ºå…¶ç´§å‡‘çš„åå…­è¿›åˆ¶è¡¨ç¤ºå½¢å¼ã€‚</li></ul><h3 id="hyperlinkedrelatedfield" tabindex="-1"><a class="header-anchor" href="#hyperlinkedrelatedfield" aria-hidden="true">#</a> HyperlinkedRelatedField</h3><p><code>HyperlinkedRelatedField</code> ç”¨äºä½¿ç”¨è¶…é“¾æ¥æ¥è¡¨ç¤ºå…³ç³»ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹åºåˆ—åŒ–ç±»ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> serializers<span class="token punctuation">.</span>HyperlinkedRelatedField<span class="token punctuation">(</span>
        many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        view_name<span class="token operator">=</span><span class="token string">&#39;track-detail&#39;</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;album_name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;artist&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†åºåˆ—åŒ–ä¸ºè¿™æ ·çš„è¡¨ç¤ºï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">&#39;album_name&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Graceland&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;artist&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Paul Simon&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;http://www.example.com/api/tracks/45/&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;http://www.example.com/api/tracks/46/&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;http://www.example.com/api/tracks/47/&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å­—æ®µæ˜¯å¯è¯»å†™çš„ï¼Œä½†æ‚¨å¯ä»¥ä½¿ç”¨ <code>read_only</code> æ ‡å¿—æ›´æ”¹æ­¤è¡Œä¸ºã€‚</p><hr><p><strong>æ³¨æ„</strong>ï¼šè¯¥å­—æ®µæ˜¯ä¸ºæ˜ å°„åˆ°æ¥å—å•ä¸ª URL å…³é”®å­—å‚æ•°çš„ URL çš„å¯¹è±¡è€Œè®¾è®¡çš„ï¼Œå¦‚ä½¿ç”¨ <code>lookup_field</code> å’Œ <code>lookup_url_kwarg</code> å‚æ•°è®¾ç½®çš„å¯¹è±¡ã€‚</p><p>è¿™é€‚ç”¨äºåŒ…å«å•ä¸ªä¸»é”®æˆ– slug å‚æ•°ä½œä¸º URL ä¸€éƒ¨åˆ†çš„ URLã€‚</p><p>å¦‚æœéœ€è¦æ›´å¤æ‚çš„è¶…é“¾æ¥è¡¨ç¤ºï¼Œä½ éœ€è¦è‡ªå®šä¹‰è¯¥å­—æ®µï¼Œç¨åä¼šè¯¦è§£ã€‚</p><hr><p><strong>å‚æ•°</strong>ï¼š</p><ul><li><code>view_name</code> - ç”¨ä½œå…³ç³»ç›®æ ‡çš„è§†å›¾åç§°ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ ‡å‡†è·¯ç”±å™¨ç±»ï¼Œåˆ™è¿™å°†æ˜¯ä¸€ä¸ªæ ¼å¼ä¸º <code>&lt;modelname&gt;-detail</code> çš„å­—ç¬¦ä¸²ã€‚<strong>å¿…å¡«</strong>.</li><li><code>queryset</code> - éªŒè¯å­—æ®µè¾“å…¥æ—¶ç”¨äºæ¨¡å‹å®ä¾‹æŸ¥è¯¢çš„æŸ¥è¯¢é›†ã€‚å¿…é¡»æ˜¾å¼åœ°è®¾ç½®æŸ¥è¯¢é›†ï¼Œæˆ–è®¾ç½® <code>read_only=True</code>ã€‚</li><li><code>many</code> - å¦‚æœåº”ç”¨äºä¸€å¯¹å¤šå…³ç³»ï¼Œåˆ™åº”å°†æ­¤å‚æ•°è®¾ç½®ä¸º <code>True</code>ã€‚</li><li><code>allow_null</code> - å¦‚æœè®¾ç½®ä¸º <code>True</code>ï¼Œé‚£ä¹ˆè¯¥å­—æ®µå°†æ¥å— <code>None</code> å€¼æˆ–å¯ä¸ºç©ºçš„å…³ç³»çš„ç©ºå­—ç¬¦ä¸²ã€‚é»˜è®¤ä¸º <code>False</code>ã€‚</li><li><code>lookup_field</code> - ç”¨äºæŸ¥æ‰¾çš„ç›®æ ‡å­—æ®µã€‚å¯¹åº”äºå¼•ç”¨è§†å›¾ä¸Šçš„ URL å…³é”®å­—å‚æ•°ã€‚é»˜è®¤æ˜¯ <code>&#39;pk&#39;</code>.</li><li><code>lookup_url_kwarg</code> - ä¸æŸ¥æ‰¾å­—æ®µå¯¹åº”çš„ URL conf ä¸­å®šä¹‰çš„å…³é”®å­—å‚æ•°çš„åç§°ã€‚é»˜è®¤ä½¿ç”¨ä¸ <code>lookup_field</code> ç›¸åŒçš„å€¼ã€‚</li><li><code>format</code> - å¦‚æœä½¿ç”¨æ ¼å¼åç¼€ï¼Œåˆ™è¶…é“¾æ¥å­—æ®µå°†ä½¿ç”¨ä¸ç›®æ ‡ç›¸åŒçš„æ ¼å¼åç¼€ï¼Œé™¤éä½¿ç”¨ <code>format</code> å‚æ•°è¿›è¡Œè¦†ç›–ã€‚</li></ul><h3 id="slugrelatedfield" tabindex="-1"><a class="header-anchor" href="#slugrelatedfield" aria-hidden="true">#</a> SlugRelatedField</h3><p><code>SlugRelatedField</code> ç”¨äºä½¿ç”¨ç›®æ ‡ä¸Šçš„å­—æ®µæ¥è¡¨ç¤ºå…³ç³»ã€‚</p><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹åºåˆ—åŒ–ç±»ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> serializers<span class="token punctuation">.</span>SlugRelatedField<span class="token punctuation">(</span>
        many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        slug_field<span class="token operator">=</span><span class="token string">&#39;title&#39;</span>
     <span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;album_name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;artist&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†åºåˆ—åŒ–ä¸ºè¿™æ ·çš„è¡¨ç¤ºï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">&#39;album_name&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Dear John&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;artist&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Loney Dear&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;Airport Surroundings&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;Everything Turns to You&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;I Was Only Going Out&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å­—æ®µæ˜¯å¯è¯»å†™çš„ï¼Œä½†æ‚¨å¯ä»¥ä½¿ç”¨ <code>read_only</code> æ ‡å¿—æ›´æ”¹æ­¤è¡Œä¸ºã€‚</p><p>å°† <code>SlugRelatedField</code> ç”¨ä½œè¯»å†™å­—æ®µæ—¶ï¼Œé€šå¸¸éœ€è¦ç¡®ä¿ slug å­—æ®µä¸ <code>unique=True</code> çš„æ¨¡å‹å­—æ®µç›¸å¯¹åº”ã€‚</p><p><strong>å‚æ•°</strong>ï¼š</p><ul><li><code>slug_field</code> - ç”¨æ¥è¡¨ç¤ºç›®æ ‡çš„å­—æ®µã€‚è¿™åº”è¯¥æ˜¯å”¯ä¸€æ ‡è¯†ç»™å®šå®ä¾‹çš„å­—æ®µã€‚ä¾‹å¦‚ï¼Œ <code>username</code>ã€‚<strong>å¿…å¡«</strong></li><li><code>queryset</code> - éªŒè¯å­—æ®µè¾“å…¥æ—¶ç”¨äºæ¨¡å‹å®ä¾‹æŸ¥è¯¢çš„æŸ¥è¯¢é›†ã€‚å¿…é¡»æ˜¾å¼åœ°è®¾ç½®æŸ¥è¯¢é›†ï¼Œæˆ–è®¾ç½® <code>read_only=True</code>ã€‚</li><li><code>many</code> - å¦‚æœåº”ç”¨äºä¸€å¯¹å¤šå…³ç³»ï¼Œåˆ™åº”å°†æ­¤å‚æ•°è®¾ç½®ä¸º <code>True</code>ã€‚</li><li><code>allow_null</code> - å¦‚æœè®¾ç½®ä¸º <code>True</code>ï¼Œé‚£ä¹ˆè¯¥å­—æ®µå°†æ¥å— <code>None</code> å€¼æˆ–å¯ä¸ºç©ºçš„å…³ç³»çš„ç©ºå­—ç¬¦ä¸²ã€‚é»˜è®¤ä¸º <code>False</code>ã€‚</li></ul><h3 id="hyperlinkedidentityfield" tabindex="-1"><a class="header-anchor" href="#hyperlinkedidentityfield" aria-hidden="true">#</a> HyperlinkedIdentityField</h3><p>æ­¤å­—æ®µå¯ä»¥ä½œä¸ºèº«ä»½å…³ç³»åº”ç”¨ï¼Œä¾‹å¦‚ <code>HyperlinkedModelSerializer</code> ä¸Šçš„ <code>&#39;url&#39;</code> å­—æ®µã€‚å®ƒä¹Ÿå¯ä»¥ç”¨äºå¯¹è±¡çš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹åºåˆ—åŒ–ç±»ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>HyperlinkedModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    track_listing <span class="token operator">=</span> serializers<span class="token punctuation">.</span>HyperlinkedIdentityField<span class="token punctuation">(</span>view_name<span class="token operator">=</span><span class="token string">&#39;track-list&#39;</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;album_name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;artist&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;track_listing&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†åºåˆ—åŒ–ä¸ºè¿™æ ·çš„è¡¨ç¤ºï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">&#39;album_name&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;The Eraser&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;artist&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Thom Yorke&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;track_listing&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;http://www.example.com/api/track_list/12/&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥å­—æ®µå§‹ç»ˆä¸ºåªè¯»ã€‚</p><p><strong>å‚æ•°</strong>ï¼š</p><ul><li><code>view_name</code> - ç”¨ä½œå…³ç³»ç›®æ ‡çš„è§†å›¾åç§°ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ ‡å‡†è·¯ç”±å™¨ç±»ï¼Œåˆ™è¿™å°†æ˜¯ä¸€ä¸ªæ ¼å¼ä¸º <code>&lt;modelname&gt;-detail</code> çš„å­—ç¬¦ä¸²ã€‚<strong>å¿…å¡«</strong>ã€‚</li><li><code>lookup_field</code> - ç”¨äºæŸ¥æ‰¾çš„ç›®æ ‡å­—æ®µã€‚å¯¹åº”äºå¼•ç”¨è§†å›¾ä¸Šçš„ URL å…³é”®å­—å‚æ•°ã€‚é»˜è®¤æ˜¯ <code>&#39;pk&#39;</code>ã€‚</li><li><code>lookup_url_kwarg</code> - ä¸æŸ¥æ‰¾å­—æ®µå¯¹åº”çš„ URL conf ä¸­å®šä¹‰çš„å…³é”®å­—å‚æ•°çš„åç§°ã€‚é»˜è®¤ä½¿ç”¨ä¸ <code>lookup_field</code> ç›¸åŒçš„å€¼ã€‚</li><li><code>format</code> - å¦‚æœä½¿ç”¨æ ¼å¼åç¼€ï¼Œåˆ™è¶…é“¾æ¥å­—æ®µå°†ä½¿ç”¨ä¸ç›®æ ‡ç›¸åŒçš„æ ¼å¼åç¼€ï¼Œé™¤éä½¿ç”¨ <code>format</code> å‚æ•°è¿›è¡Œè¦†ç›–ã€‚</li></ul><h3 id="åµŒå¥—å…³ç³»-nested-relationships" tabindex="-1"><a class="header-anchor" href="#åµŒå¥—å…³ç³»-nested-relationships" aria-hidden="true">#</a> åµŒå¥—å…³ç³»(Nested relationships)</h3><p>åµŒå¥—å…³ç³»å¯ä»¥é€šè¿‡ä½¿ç”¨åºåˆ—åŒ–ç±»ä½œä¸ºå­—æ®µæ¥è¡¨è¾¾ã€‚</p><p>å¦‚æœè¯¥å­—æ®µç”¨äºè¡¨ç¤ºä¸€å¯¹å¤šå…³ç³»ï¼Œåˆ™åº”å°† <code>many=True</code> æ ‡å¿—æ·»åŠ åˆ°åºåˆ—åŒ–å­—æ®µã€‚</p>`,55),w={id:"ä¸¾ä¸ªæ —å­",tabindex:"-1"},z=n("a",{class:"header-anchor",href:"#ä¸¾ä¸ªæ —å­","aria-hidden":"true"},"#",-1),B={href:"http://drf.jiuyou.info/#/drf/relations?id=%E4%B8%BE%E4%B8%AA%E6%A0%97%E5%AD%90",title:"ä¸¾ä¸ªæ —å­",target:"_blank",rel:"noopener noreferrer"},T=t(`<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹åºåˆ—åŒ–ç±»ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TrackSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Track
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;order&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;duration&#39;</span><span class="token punctuation">]</span>

<span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> TrackSerializer<span class="token punctuation">(</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> read_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;album_name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;artist&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†åºåˆ—åŒ–ä¸ºè¿™æ ·çš„åµŒå¥—è¡¨ç¤ºï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> album <span class="token operator">=</span> Album<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>album_name<span class="token operator">=</span><span class="token string">&quot;The Grey Album&quot;</span><span class="token punctuation">,</span> artist<span class="token operator">=</span><span class="token string">&#39;Danger Mouse&#39;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Track<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>album<span class="token operator">=</span>album<span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">&#39;Public Service Announcement&#39;</span><span class="token punctuation">,</span> duration<span class="token operator">=</span><span class="token number">245</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Track<span class="token punctuation">:</span> Track <span class="token builtin">object</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Track<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>album<span class="token operator">=</span>album<span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">&#39;What More Can I Say&#39;</span><span class="token punctuation">,</span> duration<span class="token operator">=</span><span class="token number">264</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Track<span class="token punctuation">:</span> Track <span class="token builtin">object</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Track<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>album<span class="token operator">=</span>album<span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> title<span class="token operator">=</span><span class="token string">&#39;Encore&#39;</span><span class="token punctuation">,</span> duration<span class="token operator">=</span><span class="token number">159</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Track<span class="token punctuation">:</span> Track <span class="token builtin">object</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer <span class="token operator">=</span> AlbumSerializer<span class="token punctuation">(</span>instance<span class="token operator">=</span>album<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer<span class="token punctuation">.</span>data
<span class="token punctuation">{</span>
    <span class="token string">&#39;album_name&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;The Grey Album&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;artist&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Danger Mouse&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token string">&#39;order&#39;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Public Service Announcement&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;duration&#39;</span><span class="token punctuation">:</span> <span class="token number">245</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">&#39;order&#39;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;What More Can I Say&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;duration&#39;</span><span class="token punctuation">:</span> <span class="token number">264</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">&#39;order&#39;</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Encore&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;duration&#39;</span><span class="token punctuation">:</span> <span class="token number">159</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¯å†™çš„åµŒå¥—-serializer-writable-nested-serializers" tabindex="-1"><a class="header-anchor" href="#å¯å†™çš„åµŒå¥—-serializer-writable-nested-serializers" aria-hidden="true">#</a> å¯å†™çš„åµŒå¥— serializer(Writable nested serializers)</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒåµŒå¥—åºåˆ—åŒ–ç±»æ˜¯åªè¯»çš„ã€‚å¦‚æœè¦æ”¯æŒå¯¹åµŒå¥—åºåˆ—åŒ–å­—æ®µçš„å†™æ“ä½œï¼Œåˆ™éœ€è¦åˆ›å»º <code>create()</code> å’Œ/æˆ– <code>update()</code> æ–¹æ³•ï¼Œä»¥æ˜ç¡®æŒ‡å®šåº”å¦‚ä½•ä¿å­˜å­å…³ç³»ã€‚</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TrackSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Track
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;order&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;duration&#39;</span><span class="token punctuation">]</span>

<span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> TrackSerializer<span class="token punctuation">(</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;album_name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;artist&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">create</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> validated_data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        tracks_data <span class="token operator">=</span> validated_data<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token string">&#39;tracks&#39;</span><span class="token punctuation">)</span>
        album <span class="token operator">=</span> Album<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token operator">**</span>validated_data<span class="token punctuation">)</span>
        <span class="token keyword">for</span> track_data <span class="token keyword">in</span> tracks_data<span class="token punctuation">:</span>
            Track<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>album<span class="token operator">=</span>album<span class="token punctuation">,</span> <span class="token operator">**</span>track_data<span class="token punctuation">)</span>
        <span class="token keyword">return</span> album

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;album_name&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;The Grey Album&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;artist&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Danger Mouse&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token string">&#39;order&#39;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Public Service Announcement&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;duration&#39;</span><span class="token punctuation">:</span> <span class="token number">245</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">&#39;order&#39;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;What More Can I Say&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;duration&#39;</span><span class="token punctuation">:</span> <span class="token number">264</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token string">&#39;order&#39;</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Encore&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;duration&#39;</span><span class="token punctuation">:</span> <span class="token number">159</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer <span class="token operator">=</span> AlbumSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> serializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Album<span class="token punctuation">:</span> Album <span class="token builtin">object</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),F={id:"è‡ªå®šä¹‰å…³ç³»å­—æ®µ",tabindex:"-1"},S=n("a",{class:"header-anchor",href:"#è‡ªå®šä¹‰å…³ç³»å­—æ®µ","aria-hidden":"true"},"#",-1),q={href:"http://drf.jiuyou.info/#/drf/relations?id=%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%B3%E7%B3%BB%E5%AD%97%E6%AE%B5",title:"è‡ªå®šä¹‰å…³ç³»å­—æ®µ",target:"_blank",rel:"noopener noreferrer"},x=t("<p>åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œç°æœ‰çš„å…³ç³»ç±»å‹éƒ½ä¸ç¬¦åˆæ‚¨éœ€è¦çš„è¡¨ç¤ºå½¢å¼ï¼Œä½ å¯ä»¥å®ç°ä¸€ä¸ªå®Œå…¨è‡ªå®šä¹‰çš„å…³ç³»å­—æ®µï¼Œè¯¥å­—æ®µå‡†ç¡®æè¿°åº”è¯¥å¦‚ä½•ä»æ¨¡å‹å®ä¾‹ç”Ÿæˆè¾“å‡ºè¡¨ç¤ºã€‚</p><p>è¦å®ç°è‡ªå®šä¹‰å…³ç³»å­—æ®µï¼Œæ‚¨åº”è¯¥é‡å†™ <code>RelatedField</code>ï¼Œå¹¶å®ç° <code>.to_representation(self, value)</code> æ–¹æ³•ã€‚æ­¤æ–¹æ³•å°†å­—æ®µçš„ç›®æ ‡ä½œä¸º <code>value</code> å‚æ•°ï¼Œå¹¶è¿”å›åº”ç”¨äºåºåˆ—åŒ–ç›®æ ‡çš„è¡¨ç¤ºã€‚<code>value</code> å‚æ•°é€šå¸¸æ˜¯ä¸€ä¸ªæ¨¡å‹å®ä¾‹ã€‚</p><p>å¦‚æœè¦å®ç°è¯»å†™å…³ç³»å­—æ®µï¼Œåˆ™è¿˜å¿…é¡»å®ç° <code>.to_internal_value(self, data)</code> æ–¹æ³•ã€‚</p><p>è¦æä¾›åŸºäº <code>context</code> çš„åŠ¨æ€æŸ¥è¯¢é›†ï¼Œè¿˜å¯ä»¥è¦†ç›– <code>.get_queryset(self)</code>ï¼Œè€Œä¸æ˜¯åœ¨ç±»ä¸ŠæŒ‡å®š <code>.queryset</code> æˆ–åˆå§‹åŒ–è¯¥å­—æ®µã€‚</p>",4),M={id:"ä¸¾ä¸ªæ —å­-1",tabindex:"-1"},R=n("a",{class:"header-anchor",href:"#ä¸¾ä¸ªæ —å­-1","aria-hidden":"true"},"#",-1),j={href:"http://drf.jiuyou.info/#/drf/relations?id=%E4%B8%BE%E4%B8%AA%E6%A0%97%E5%AD%90-1",title:"ä¸¾ä¸ªæ —å­",target:"_blank",rel:"noopener noreferrer"},L=t(`<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå…³ç³»å­—æ®µï¼Œä½¿ç”¨å®ƒçš„é¡ºåºï¼Œæ ‡é¢˜å’ŒæŒç»­æ—¶é—´å°†éŸ³è½¨åºåˆ—åŒ–ä¸ºè‡ªå®šä¹‰å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> time

<span class="token keyword">class</span> <span class="token class-name">TrackListingField</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>RelatedField<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">to_representation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        duration <span class="token operator">=</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&#39;%M:%S&#39;</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>gmtime<span class="token punctuation">(</span>value<span class="token punctuation">.</span>duration<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">&#39;Track %d: %s (%s)&#39;</span> <span class="token operator">%</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>order<span class="token punctuation">,</span> value<span class="token punctuation">.</span>name<span class="token punctuation">,</span> duration<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    tracks <span class="token operator">=</span> TrackListingField<span class="token punctuation">(</span>many<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Album
        fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&#39;album_name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;artist&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†åºåˆ—åŒ–ä¸ºè¿™æ ·çš„è¡¨ç¤ºï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token punctuation">{</span>
    <span class="token string">&#39;album_name&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Sometimes I Wish We Were an Eagle&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;artist&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;Bill Callahan&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;tracks&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;Track 1: Jim Cain (04:39)&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;Track 2: Eid Ma Clack Shaw (04:19)&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;Track 3: The Wind and the Dove (04:34)&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),D={id:"è‡ªå®šä¹‰è¶…é“¾æ¥å­—æ®µ",tabindex:"-1"},C=n("a",{class:"header-anchor",href:"#è‡ªå®šä¹‰è¶…é“¾æ¥å­—æ®µ","aria-hidden":"true"},"#",-1),I={href:"http://drf.jiuyou.info/#/drf/relations?id=%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B6%85%E9%93%BE%E6%8E%A5%E5%AD%97%E6%AE%B5",title:"è‡ªå®šä¹‰è¶…é“¾æ¥å­—æ®µ",target:"_blank",rel:"noopener noreferrer"},U=t("<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦è‡ªå®šä¹‰è¶…é“¾æ¥å­—æ®µçš„è¡Œä¸ºï¼Œä»¥è¡¨ç¤ºéœ€è¦å¤šä¸ªæŸ¥è¯¢å­—æ®µçš„ URLã€‚</p><p>æ‚¨å¯ä»¥é€šè¿‡ç»§æ‰¿ <code>HyperlinkedRelatedField</code> æ¥å®ç°æ­¤ç›®çš„ã€‚æœ‰ä¸¤ä¸ªå¯ä»¥è¢«è¦†ç›–çš„æ–¹æ³•ï¼š</p><p><strong>get_url(self, obj, view_name, request, format)</strong></p><p><code>get_url</code> æ–¹æ³•ç”¨äºå°†å¯¹è±¡å®ä¾‹æ˜ å°„åˆ°å…¶ URL è¡¨ç¤ºã€‚</p><p>å¦‚æœ <code>view_name</code> å’Œ <code>lookup_field</code> å±æ€§æœªé…ç½®ä¸ºæ­£ç¡®åŒ¹é… URL confï¼Œå¯èƒ½ä¼šå¼•å‘ <code>NoReverseMatch</code> ã€‚</p><p><strong>get_object(self, queryset, view_name, view_args, view_kwargs)</strong></p><p>å¦‚æœæ‚¨æƒ³æ”¯æŒå¯å†™çš„è¶…é“¾æ¥å­—æ®µï¼Œé‚£ä¹ˆæ‚¨è¿˜éœ€è¦é‡å†™ <code>get_object</code>ï¼Œä»¥ä¾¿å°†ä¼ å…¥çš„ URL æ˜ å°„å›å®ƒä»¬è¡¨ç¤ºçš„å¯¹è±¡ã€‚å¯¹äºåªè¯»è¶…é“¾æ¥å­—æ®µï¼Œä¸éœ€è¦é‡å†™æ­¤æ–¹æ³•ã€‚</p><p>æ­¤æ–¹æ³•çš„è¿”å›å€¼åº”è¯¥æ˜¯ä¸åŒ¹é…çš„ URL conf å‚æ•°å¯¹åº”çš„å¯¹è±¡ã€‚</p><p>å¯èƒ½ä¼šå¼•å‘ <code>ObjectDoesNotExist</code> å¼‚å¸¸ã€‚</p>",9),H={id:"ä¸¾ä¸ªæ —å­-2",tabindex:"-1"},P=n("a",{class:"header-anchor",href:"#ä¸¾ä¸ªæ —å­-2","aria-hidden":"true"},"#",-1),N={href:"http://drf.jiuyou.info/#/drf/relations?id=%E4%B8%BE%E4%B8%AA%E6%A0%97%E5%AD%90-2",title:"ä¸¾ä¸ªæ —å­",target:"_blank",rel:"noopener noreferrer"},K=t(`<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå…³é”®å­—å‚æ•°çš„ customer å¯¹è±¡çš„ URLï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token operator">/</span>api<span class="token operator">/</span><span class="token operator">&lt;</span>organization_slug<span class="token operator">&gt;</span><span class="token operator">/</span>customers<span class="token operator">/</span><span class="token operator">&lt;</span>customer_pk<span class="token operator">&gt;</span><span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ²¡åŠæ³•ç”¨ä»…æ¥å—å•ä¸ªæŸ¥æ‰¾å­—æ®µçš„é»˜è®¤å®ç°æ¥è¡¨ç¤ºã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ç»§æ‰¿ <code>HyperlinkedRelatedField</code> å¹¶é‡å†™å…¶ä¸­çš„æ–¹æ³•æ¥è·å¾—æˆ‘ä»¬æƒ³è¦çš„è¡Œä¸ºï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers
<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>reverse <span class="token keyword">import</span> reverse

<span class="token keyword">class</span> <span class="token class-name">CustomerHyperlink</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>HyperlinkedRelatedField<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># We define these as class attributes, so we don&#39;t need to pass them as arguments.</span>
    view_name <span class="token operator">=</span> <span class="token string">&#39;customer-detail&#39;</span>
    queryset <span class="token operator">=</span> Customer<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_url</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> view_name<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        url_kwargs <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">&#39;organization_slug&#39;</span><span class="token punctuation">:</span> obj<span class="token punctuation">.</span>organization<span class="token punctuation">.</span>slug<span class="token punctuation">,</span>
            <span class="token string">&#39;customer_pk&#39;</span><span class="token punctuation">:</span> obj<span class="token punctuation">.</span>pk
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span>view_name<span class="token punctuation">,</span> kwargs<span class="token operator">=</span>url_kwargs<span class="token punctuation">,</span> request<span class="token operator">=</span>request<span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token builtin">format</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_object</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> view_name<span class="token punctuation">,</span> view_args<span class="token punctuation">,</span> view_kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        lookup_kwargs <span class="token operator">=</span> <span class="token punctuation">{</span>
           <span class="token string">&#39;organization__slug&#39;</span><span class="token punctuation">:</span> view_kwargs<span class="token punctuation">[</span><span class="token string">&#39;organization_slug&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
           <span class="token string">&#39;pk&#39;</span><span class="token punctuation">:</span> view_kwargs<span class="token punctuation">[</span><span class="token string">&#39;customer_pk&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>get_queryset<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token operator">**</span>lookup_kwargs<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨æƒ³å°†æ­¤é£æ ¼ä¸é€šç”¨è§†å›¾ä¸€èµ·ä½¿ç”¨ï¼Œé‚£ä¹ˆæ‚¨è¿˜éœ€è¦è¦†ç›–è§†å›¾ä¸Šçš„ <code>.get_object</code> ä»¥è·å¾—æ­£ç¡®çš„æŸ¥æ‰¾è¡Œä¸ºã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å»ºè®®å°½å¯èƒ½åœ¨ API è¡¨ç¤ºæ–¹å¼ä¸‹ä½¿ç”¨å¹³é¢é£æ ¼ï¼Œä½†åµŒå¥— URL é£æ ¼åœ¨é€‚åº¦ä½¿ç”¨æ—¶ä¹Ÿæ˜¯åˆç†çš„ã€‚</p><hr>`,8),W={id:"è¿›ä¸€æ­¥è¯´æ˜",tabindex:"-1"},G=n("a",{class:"header-anchor",href:"#è¿›ä¸€æ­¥è¯´æ˜","aria-hidden":"true"},"#",-1),O={href:"http://drf.jiuyou.info/#/drf/relations?id=%E8%BF%9B%E4%B8%80%E6%AD%A5%E8%AF%B4%E6%98%8E",title:"è¿›ä¸€æ­¥è¯´æ˜",target:"_blank",rel:"noopener noreferrer"},V={id:"queryset-å‚æ•°",tabindex:"-1"},J=n("a",{class:"header-anchor",href:"#queryset-å‚æ•°","aria-hidden":"true"},"#",-1),Y={href:"http://drf.jiuyou.info/#/drf/relations?id=queryset-%E5%8F%82%E6%95%B0",title:"queryset",target:"_blank",rel:"noopener noreferrer"},X={href:"http://drf.jiuyou.info/#/drf/relations?id=queryset-%E5%8F%82%E6%95%B0",title:" å‚æ•°",target:"_blank",rel:"noopener noreferrer"},Q=t("<p><code>queryset</code> å‚æ•°åªå¯¹å¯å†™å…³ç³»å­—æ®µæ˜¯å¿…éœ€çš„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒç”¨äºæ‰§è¡Œæ¨¡å‹å®ä¾‹æŸ¥æ‰¾ï¼Œè¯¥æŸ¥æ‰¾ä»åŸºæœ¬ç”¨æˆ·è¾“å…¥æ˜ å°„åˆ°æ¨¡å‹å®ä¾‹ã€‚</p><p>åœ¨ 2.x ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœæ­£åœ¨ä½¿ç”¨ <code>ModelSerializer</code> ç±»ï¼Œåˆ™åºåˆ—åŒ–ç±»æœ‰æ—¶ä¼šè‡ªåŠ¨ç¡®å®š <code>queryset</code> å‚æ•°ã€‚</p><p>æ­¤è¡Œä¸ºç°åœ¨æ›¿æ¢ä¸ºå§‹ç»ˆä¸ºå¯å†™å…³ç³»å­—æ®µä½¿ç”¨æ˜¾å¼ <code>queryset</code> å‚æ•°ã€‚</p><p>è¿™æ ·åšå¯ä»¥å‡å°‘ <code>ModelSerializer</code> æä¾›çš„éšè— â€œé­”æœ¯â€ æ•°é‡ï¼ˆæŒ‡ <code>ModelSerializer</code> åœ¨å†…éƒ¨å¸®æˆ‘ä»¬å®Œæˆçš„å·¥ä½œï¼‰ï¼Œä½¿å­—æ®µçš„è¡Œä¸ºæ›´åŠ æ¸…æ™°ï¼Œå¹¶ç¡®ä¿åœ¨ä½¿ç”¨ <code>ModelSerializer</code> å¿«æ·æ–¹å¼ï¼ˆé«˜åº¦å°è£…è¿‡ï¼Œä½¿ç”¨ç®€å•ï¼‰æˆ–ä½¿ç”¨å®Œå…¨æ˜¾å¼çš„ <code>Serializer</code> ç±»ä¹‹é—´è½¬æ¢æ˜¯å¾®ä¸è¶³é“çš„ã€‚</p>",4),Z={id:"è‡ªå®šä¹‰-html-æ˜¾ç¤º",tabindex:"-1"},$=n("a",{class:"header-anchor",href:"#è‡ªå®šä¹‰-html-æ˜¾ç¤º","aria-hidden":"true"},"#",-1),nn={href:"http://drf.jiuyou.info/#/drf/relations?id=%E8%87%AA%E5%AE%9A%E4%B9%89-html-%E6%98%BE%E7%A4%BA",title:"è‡ªå®šä¹‰ HTML æ˜¾ç¤º",target:"_blank",rel:"noopener noreferrer"},sn=t(`<p>æ¨¡å‹å†…ç½®çš„ <code>__str__</code> æ–¹æ³•ç”¨æ¥ç”Ÿæˆç”¨äºå¡«å…… <code>choices</code> å±æ€§çš„å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚è¿™äº› choices ç”¨äºåœ¨å¯æµè§ˆçš„ API ä¸­å¡«å……é€‰æ‹©çš„ HTML inputã€‚</p><p>è¦ä¸ºè¿™äº› input æä¾›è‡ªå®šä¹‰è¡¨ç¤ºï¼Œè¯·é‡å†™ <code>RelatedField</code> å­ç±»çš„ <code>display_value()</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°†æ¥æ”¶ä¸€ä¸ªæ¨¡å‹å¯¹è±¡ï¼Œå¹¶ä¸”åº”è¯¥è¿”å›ä¸€ä¸ªé€‚åˆè¡¨ç¤ºå®ƒçš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TrackPrimaryKeyRelatedField</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>PrimaryKeyRelatedField<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">display_value</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> instance<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">&#39;Track: %s&#39;</span> <span class="token operator">%</span> <span class="token punctuation">(</span>instance<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),an={id:"select-field-cutoffs",tabindex:"-1"},en=n("a",{class:"header-anchor",href:"#select-field-cutoffs","aria-hidden":"true"},"#",-1),tn={href:"http://drf.jiuyou.info/#/drf/relations?id=select-field-cutoffs",title:"Select field cutoffs",target:"_blank",rel:"noopener noreferrer"},pn=t(`<p>åœ¨æ¸²æŸ“å¯æµè§ˆçš„ API å…³ç³»å­—æ®µæ—¶ï¼Œé»˜è®¤åªæ˜¾ç¤ºæœ€å¤š 1000 ä¸ªå¯é€‰ itemã€‚å¦‚æœå­˜åœ¨æ›´å¤šé¡¹ç›®ï¼Œåˆ™ä¼šæ˜¾ç¤º &quot;More than 1000 itemsâ€¦&quot; çš„ disabled é€‰é¡¹ã€‚</p><p>æ­¤è¡Œä¸ºæ—¨åœ¨é˜²æ­¢ç”±äºæ˜¾ç¤ºå¤§é‡å…³ç³»è€Œå¯¼è‡´æ¨¡æ¿æ— æ³•åœ¨å¯æ¥å—çš„æ—¶é—´èŒƒå›´å†…å®Œæˆæ¸²æŸ“ã€‚</p><p>æœ‰ä¸¤ä¸ªå…³é”®å­—å‚æ•°å¯ç”¨äºæ§åˆ¶æ­¤è¡Œä¸ºï¼š</p><ul><li><code>html_cutoff</code> - è®¾ç½® HTML select ä¸‹æ‹‰èœå•ä¸­æ˜¾ç¤ºçš„é€‰é¡¹çš„æœ€å¤§æ•°é‡ã€‚è®¾ç½®ä¸º <code>None</code> å¯ä»¥ç¦ç”¨ä»»ä½•é™åˆ¶ã€‚é»˜è®¤ä¸º <code>1000</code>ã€‚</li><li><code>html_cutoff_text</code> - è®¾ç½®ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œåœ¨ HTML select ä¸‹æ‹‰èœå•è¶…å‡ºæœ€å¤§æ˜¾ç¤ºæ•°é‡æ—¶æ˜¾ç¤ºã€‚é»˜è®¤æ˜¯ <code>&quot;More than {count} itemsâ€¦&quot;</code></li></ul><p>ä½ è¿˜å¯ä»¥åœ¨ settings ä¸­ç”¨ <code>HTML_SELECT_CUTOFF</code> å’Œ <code>HTML_SELECT_CUTOFF_TEXT</code> æ¥å…¨å±€æ§åˆ¶è¿™äº›è®¾ç½®ã€‚</p><p>åœ¨å¼ºåˆ¶æ‰§è¡Œ cutoff çš„æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¸Œæœ›æ”¹ä¸ºåœ¨ HTML è¡¨å•ä¸­ä½¿ç”¨ç®€å•çš„ input å­—æ®µã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>style</code> å…³é”®å­—å‚æ•°æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¾‹å¦‚ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>assigned_to <span class="token operator">=</span> serializers<span class="token punctuation">.</span>SlugRelatedField<span class="token punctuation">(</span>
   queryset<span class="token operator">=</span>User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   slug_field<span class="token operator">=</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">,</span>
   style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;base_template&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;input.html&#39;</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),on={id:"åå‘å…³ç³»",tabindex:"-1"},ln=n("a",{class:"header-anchor",href:"#åå‘å…³ç³»","aria-hidden":"true"},"#",-1),cn={href:"http://drf.jiuyou.info/#/drf/relations?id=%E5%8F%8D%E5%90%91%E5%85%B3%E7%B3%BB",title:"åå‘å…³ç³»",target:"_blank",rel:"noopener noreferrer"},rn=t(`<p>è¯·æ³¨æ„ï¼Œåå‘å…³ç³»ä¸ä¼šè‡ªåŠ¨åŒ…å«åœ¨ <code>ModelSerializer</code> å’Œ <code>HyperlinkedModelSerializer</code> ç±»ä¸­ã€‚è¦åŒ…å«åå‘å…³ç³»ï¼Œæ‚¨å¿…é¡»æ˜ç¡®å°†å…¶æ·»åŠ åˆ°å­—æ®µåˆ—è¡¨ä¸­ã€‚ä¾‹å¦‚ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&#39;tracks&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šå¸¸éœ€è¦ç¡®ä¿å·²ç»åœ¨å…³ç³»ä¸Šè®¾ç½®äº†é€‚å½“çš„ <code>related_name</code> å‚æ•°ï¼Œå¯ä»¥å°†å…¶ç”¨ä½œå­—æ®µåç§°ã€‚ä¾‹å¦‚ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Track</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    album <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>Album<span class="token punctuation">,</span> related_name<span class="token operator">=</span><span class="token string">&#39;tracks&#39;</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ è¿˜æ²¡æœ‰ä¸ºåå‘å…³ç³»è®¾ç½®ç›¸å…³åç§°ï¼Œåˆ™éœ€è¦åœ¨ <code>fields</code> å‚æ•°ä¸­ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„ç›¸å…³åç§°ã€‚ä¾‹å¦‚ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">AlbumSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>ModelSerializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&#39;track_set&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),un={href:"https://docs.djangoproject.com/en/stable/topics/db/queries/#following-relationships-backward",title:"åå‘å…³ç³»",target:"_blank",rel:"noopener noreferrer"},dn={id:"é€šç”¨å…³ç³»",tabindex:"-1"},kn=n("a",{class:"header-anchor",href:"#é€šç”¨å…³ç³»","aria-hidden":"true"},"#",-1),vn={href:"http://drf.jiuyou.info/#/drf/relations?id=%E9%80%9A%E7%94%A8%E5%85%B3%E7%B3%BB",title:"é€šç”¨å…³ç³»",target:"_blank",rel:"noopener noreferrer"},mn=t(`<p>å¦‚æœè¦åºåˆ—åŒ–é€šç”¨å¤–é”®ï¼Œåˆ™éœ€è¦è‡ªå®šä¹‰å­—æ®µï¼Œä»¥æ˜ç¡®ç¡®å®šå¦‚ä½•åºåˆ—åŒ–å…³ç³»ã€‚</p><p>ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ªä»¥ä¸‹æ¨¡å‹çš„æ ‡ç­¾ï¼Œè¯¥æ ‡ç­¾ä¸å…¶ä»–ä»»æ„æ¨¡å‹å…·æœ‰é€šç”¨å…³ç³»ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TaggedItem</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    Tags arbitrary model instances using a generic relation.

    See: https://docs.djangoproject.com/en/stable/ref/contrib/contenttypes/
    &quot;&quot;&quot;</span>
    tag_name <span class="token operator">=</span> models<span class="token punctuation">.</span>SlugField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    content_type <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>ContentType<span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span>
    object_id <span class="token operator">=</span> models<span class="token punctuation">.</span>PositiveIntegerField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    tagged_object <span class="token operator">=</span> GenericForeignKey<span class="token punctuation">(</span><span class="token string">&#39;content_type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;object_id&#39;</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__unicode__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>tag_name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸‹ä¸¤ç§æ¨¡å¼å¯ä»¥ç”¨ç›¸å…³çš„æ ‡ç­¾ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Bookmark</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    A bookmark consists of a URL, and 0 or more descriptive tags.
    &quot;&quot;&quot;</span>
    url <span class="token operator">=</span> models<span class="token punctuation">.</span>URLField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    tags <span class="token operator">=</span> GenericRelation<span class="token punctuation">(</span>TaggedItem<span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">Note</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    A note consists of some text, and 0 or more descriptive tags.
    &quot;&quot;&quot;</span>
    text <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span>
    tags <span class="token operator">=</span> GenericRelation<span class="token punctuation">(</span>TaggedItem<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå¯ç”¨äºåºåˆ—åŒ–æ ‡ç­¾å®ä¾‹çš„è‡ªå®šä¹‰å­—æ®µï¼Œå¹¶ä½¿ç”¨æ¯ä¸ªå®ä¾‹çš„ç±»å‹æ¥ç¡®å®šå®ƒåº”è¯¥å¦‚ä½•åºåˆ—åŒ–ã€‚</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TaggedObjectRelatedField</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>RelatedField<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    A custom field to use for the \`tagged_object\` generic relationship.
    &quot;&quot;&quot;</span>

    <span class="token keyword">def</span> <span class="token function">to_representation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        Serialize tagged objects to a simple textual representation.
        &quot;&quot;&quot;</span>
        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> Bookmark<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string">&#39;Bookmark: &#39;</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>url
        <span class="token keyword">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> Note<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string">&#39;Note: &#39;</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>text
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">&#39;Unexpected type of tagged object&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ éœ€è¦çš„å…³ç³»å…·æœ‰åµŒå¥—è¡¨ç¤ºï¼Œåˆ™å¯ä»¥åœ¨ <code>.to_representation()</code> æ–¹æ³•ä¸­ä½¿ç”¨æ‰€éœ€çš„åºåˆ—åŒ–ç±»ï¼š</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">to_representation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    Serialize bookmark instances using a bookmark serializer,
    and note instances using a note serializer.
    &quot;&quot;&quot;</span>
    <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> Bookmark<span class="token punctuation">)</span><span class="token punctuation">:</span>
        serializer <span class="token operator">=</span> BookmarkSerializer<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token keyword">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> Note<span class="token punctuation">)</span><span class="token punctuation">:</span>
        serializer <span class="token operator">=</span> NoteSerializer<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">&#39;Unexpected type of tagged object&#39;</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> serializer<span class="token punctuation">.</span>data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯·æ³¨æ„ï¼Œä½¿ç”¨ <code>GenericRelation</code> å­—æ®µè¡¨ç¤ºçš„åå‘é€šç”¨é”®å¯ä»¥ä½¿ç”¨å¸¸è§„å…³ç³»å­—æ®µç±»å‹è¿›è¡Œåºåˆ—åŒ–ï¼Œå› ä¸ºå…³ç³»ä¸­ç›®æ ‡çš„ç±»å‹æ€»æ˜¯å·²çŸ¥çš„ã€‚</p>`,10),bn={href:"https://docs.djangoproject.com/en/stable/ref/contrib/contenttypes/#id1",title:"æœ‰å…³æ³›å‹å…³ç³»çš„ Django æ–‡æ¡£",target:"_blank",rel:"noopener noreferrer"},gn={id:"å…·æœ‰-through-æ¨¡å‹çš„-manytomanyfields",tabindex:"-1"},hn=n("a",{class:"header-anchor",href:"#å…·æœ‰-through-æ¨¡å‹çš„-manytomanyfields","aria-hidden":"true"},"#",-1),_n={href:"http://drf.jiuyou.info/#/drf/relations?id=%E5%85%B7%E6%9C%89-through-%E6%A8%A1%E5%9E%8B%E7%9A%84-manytomanyfields",title:"å…·æœ‰ Through æ¨¡å‹çš„ ManyToManyFields",target:"_blank",rel:"noopener noreferrer"},yn=n("p",null,[s("é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†æŒ‡å®šå¸¦æœ‰ "),n("code",null,"through"),s(" æ¨¡å‹çš„ "),n("code",null,"ManyToManyField"),s(" çš„å…³ç³»å­—æ®µè®¾ç½®ä¸ºåªè¯»ã€‚")],-1),fn=n("p",null,[s("å¦‚æœä½ è¦æ˜ç¡®æŒ‡å®šä¸€ä¸ªæŒ‡å‘å…·æœ‰ through æ¨¡å‹çš„ "),n("code",null,"ManyToManyField"),s(" çš„å…³ç³»å­—æ®µï¼Œè¯·ç¡®ä¿å°† "),n("code",null,"read_only"),s(" è®¾ç½®ä¸º "),n("code",null,"True"),s(" ã€‚")],-1);function En(An,wn){const a=o("ExternalLinkIcon");return l(),i("div",null,[r,n("blockquote",null,[n("p",null,[n("a",u,[s("å®˜æ–¹åŸæ–‡é“¾æ¥"),e(a)])])]),n("h1",d,[k,s(),n("a",v,[s("Serializer å…³ç³»"),e(a)])]),m,n("h4",b,[g,s(),n("a",h,[s("æ£€æŸ¥å…³ç³»ã€‚"),e(a)])]),_,n("h1",y,[f,s(),n("a",E,[s("API å‚è€ƒ"),e(a)])]),A,n("h2",w,[z,s(),n("a",B,[s("ä¸¾ä¸ªæ —å­"),e(a)])]),T,n("h1",F,[S,s(),n("a",q,[s("è‡ªå®šä¹‰å…³ç³»å­—æ®µ"),e(a)])]),x,n("h2",M,[R,s(),n("a",j,[s("ä¸¾ä¸ªæ —å­"),e(a)])]),L,n("h1",D,[C,s(),n("a",I,[s("è‡ªå®šä¹‰è¶…é“¾æ¥å­—æ®µ"),e(a)])]),U,n("h2",H,[P,s(),n("a",N,[s("ä¸¾ä¸ªæ —å­"),e(a)])]),K,n("h1",W,[G,s(),n("a",O,[s("è¿›ä¸€æ­¥è¯´æ˜"),e(a)])]),n("h2",V,[J,s(),n("a",Y,[s("queryset"),e(a)]),n("a",X,[s(" å‚æ•°"),e(a)])]),Q,n("h2",Z,[$,s(),n("a",nn,[s("è‡ªå®šä¹‰ HTML æ˜¾ç¤º"),e(a)])]),sn,n("h2",an,[en,s(),n("a",tn,[s("Select field cutoffs"),e(a)])]),pn,n("h2",on,[ln,s(),n("a",cn,[s("åå‘å…³ç³»"),e(a)])]),rn,n("blockquote",null,[n("p",null,[s("æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æœ‰å…³"),n("a",un,[s("åå‘å…³ç³»"),e(a)]),s("çš„ Django æ–‡æ¡£ã€‚")])]),n("h2",dn,[kn,s(),n("a",vn,[s("é€šç”¨å…³ç³»"),e(a)])]),mn,n("blockquote",null,[n("p",null,[s("æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…"),n("a",bn,[s("æœ‰å…³æ³›å‹å…³ç³»çš„ Django æ–‡æ¡£"),e(a)]),s("ã€‚")])]),n("h2",gn,[hn,s(),n("a",_n,[s("å…·æœ‰ Through æ¨¡å‹çš„ ManyToManyFields"),e(a)])]),yn,fn])}const Tn=p(c,[["render",En],["__file","Rest-frameworkä¸“æ è®²è§£(åä¸‰)ï¼šSerializer relations.html.vue"]]);export{Tn as default};
