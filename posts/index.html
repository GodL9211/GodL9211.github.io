<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <title>Posts | My New Hugo Site</title>
    <meta property="og:title" content="Posts - My New Hugo Site">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="">
    <meta name="description" content="Posts">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://godl9211.github.io/posts/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <link rel="alternate" type="application/rss+xml" href="https://godl9211.github.io/posts/index.xml" title="My New Hugo Site" />
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>

<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://godl9211.github.io/">
                        My New Hugo Site
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://godl9211.github.io/">Home</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://godl9211.github.io/posts/00-%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" title="前后端分离" target="_blank">前后端分离</a>
            </h1>
        </header>
        
  <time datetime="2023-01-10T11:22:13Z" class="post-meta meta-date dt-published">
    2023-01-10
  </time>



        <div class="post-content">
            开发模式 在Web开发模式中，有两种开发模式
前后端不分离 前后端分离 前后端分离优势 在前后端不分离模式中，前端页面看到的效果都是由后端控制，由后端渲染页面或重定向，也就是后端需要控制前端的展示，前端与后端的耦合度很高。
这种应用模式比较适合纯网页应用，但是当后端对接App时，App可能并不需要后端返回一个HTML网页，而仅仅是数据本身，所以后端原本返回网页的接口不再适用于前端App应用，为了对接App后端还需再开发一套接口。
在前后端分离的应用模式中，后端仅返回前端所需的数据，不再渲染HTML页面，不再控制前端的效果。至于前端用户看到什么效果，从后端请求的数据如何加载到前端中，都由前端自己决定，网页有网页的处理方式，App有App的处理方式，但无论哪种前端，所需的数据基本相同，后端仅需开发一套逻辑对外提供数据即可。
在前后端分离的应用模式中 ，前端与后端的耦合度相对较低。
在前后端分离的应用模式中，我们通常将后端开发的每个视图都称为一个接口，或者API，前端通过访问接口来对数据进行增删改查。
为什么要有前后端分离 多端适应 前后端开发职责不清 模板到低是前端写还是后端写?如果前端写,前端就要懂后端模板语言 如果后端写,那么后端就要懂前段html,css,js甚至更多更多 开发效率问题,前后端相互等待 前端在写的时候,就希望后端全部写好自己再写 后端在写的时候,就希望前端全部写好自己再写 前端一直配合着后端,能力受限(搞来搞去写静态页面,天天给后台写模板) 后台开发语言和模板高度耦合,导致开发语言依赖(一旦用python开发,以后要换成java或者其他语言) 前后端分离缺点 前后端学习门槛增加(比如后台很多模板语法控制前端展示,但是分离以后,需要前端自己去实现,增加前端成本,对后台来说,后端要满足规范)
数据依赖导致文档重要性增加
文档是否详细 是否及时更新 修改要及时通知其他端 前端工作量加大
SEO的难度增加(都是AJAX,像一些初级爬虫全部挡在外面,比如一些搜索引擎,这样你的排名就不靠前了)……
        </div>
        <p class="readmore"><a href="https://godl9211.github.io/posts/00-%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" target="_blank">Continue reading</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://godl9211.github.io/posts/01-restful-api/" title="RESTful API" target="_blank">RESTful API</a>
            </h1>
        </header>
        
  <time datetime="2023-01-10T11:22:13Z" class="post-meta meta-date dt-published">
    2023-01-10
  </time>



        <div class="post-content">
            RESTful API设计规范 域名 应该尽量将API部署在专用域名之下
https://api.example.com 如果确定API很简单，不会有进一步扩展，可以考虑放在主域名下。
https://example.com/api/ 版本 应该将API的版本号放入URL
http://www.example.com/app/1.0/apples http://www.example.com/app/1.1/apples http://www.example.com/app/2.0/apples 路径 对于一个简洁结构，你应该始终用名词。 此外，利用的HTTP方法可以分离网址中的资源名称的操作。
GET /products ：将返回所有产品清单 POST /products ：将产品新建到集合 GET /products/4 ：将获取产品4 PATCH /products/4 将更新产品4（部分属性更新） PUT /products/4：将更新产品4 （全部属性更新） HTTP动词 请求方法 请求地址 后端操作 GET /students 获取所有学生 POST /students 增加学生 GET /students/1 获取编号为1的学生 PUT /students/1 更新编号为1的学生（全部属性） DELETE /students/1 删除编号为1的学生 PATCH /students/1 更新编号为1的学生（部分属性） 过滤信息 ?limit=10：指定返回记录的数量 ?offset=10：指定返回记录的开始位置。 ?page=2&amp;per_page=100：指定第几页，以及每页的记录数。 ?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序。 ?animal_type_id=1：指定筛选条件 状态码 200 OK - [GET]：服务器成功返回用户请求的数据 201 CREATED - [POST/PUT/PATCH]：用户新建或修改数据成功。 202 Accepted - []：表示一个请求已经进入后台排队（异步任务） 204 NO CONTENT - [DELETE]：用户删除数据成功。 400 INVALID REQUEST - [POST/PUT/PATCH]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作 401 Unauthorized - []：表示用户没有权限（令牌、用户名、密码错误）。 403 Forbidden - [] 表示用户得到授权（与401错误相对），但是访问是被禁止的。 404 NOT FOUND - []：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。 406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。 410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。 422 Unprocesable entity - [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误。 500 INTERNAL SERVER ERROR - [*]：服务器发生错误，用户将无法判断发出的请求是否成功。 错误处理 { error:&#34;Invalid API key&#34; } 返回结果 GET /collection：返回资源对象的列表（数组） GET /collection/resource：返回单个资源对象 POST /collection：返回新生成的资源对象 PUT /collection/resource：返回完整的资源对象 PATCH /collection/resource：返回完整的资源对象 DELETE /collection/resource：返回一个空文档 ……
        </div>
        <p class="readmore"><a href="https://godl9211.github.io/posts/01-restful-api/" target="_blank">Continue reading</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://godl9211.github.io/posts/my-first-post/" title="My First Post" target="_blank">My First Post</a>
            </h1>
        </header>
        
  <time datetime="2023-01-10T11:22:13Z" class="post-meta meta-date dt-published">
    2023-01-10
  </time>



        <div class="post-content">
            自定义异常 目前我们返回的一些异常信息，长这个样子
{ &#34;detail&#34;: &#34;Authentication credentials were not provided.&#34; } 这样结构，对于移动端程序员是极其不友好的，所以我们一般给对方返回这样的数据结构
{ &#34;code&#34;: 401, &#34;message&#34;: &#34;Authentication credentials were not provided.&#34;, &#34;data&#34;: [] } 那我们就需要自己异常来捕获DRF里面的异常信息
创建custom_exception.py文件
from rest_framework.views import exception_handler def custom_exception_handler(exc, context): response = exception_handler(exc, context) if response is not None: response.data.clear() response.data[&#39;code&#39;] = response.status_code response.data[&#39;data&#39;] = [] if response.status_code == 404: try: response.data[&#39;message&#39;] = response.data.pop(&#39;detail&#39;) response.data[&#39;message&#39;] = &#34;未找到&#34; except KeyError: response.data[&#39;message&#39;] = &#34;未找到&#34; if response.status_code == 400: response.data[&#39;message&#39;] = &#39;输入错误&#39; elif response.……
        </div>
        <p class="readmore"><a href="https://godl9211.github.io/posts/my-first-post/" target="_blank">Continue reading</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://godl9211.github.io/posts/20-%E6%8E%92%E5%BA%8F/" title="" target="_blank"></a>
            </h1>
        </header>
        


        <div class="post-content">
            排序 OrderingFilter类支持简单的查询参数控制结果排序
配置 class GameView(CustomModelViewSet): queryset = Game.objects.all() serializer_class = GameSerializer filter_backends = (DjangoFilterBackend, filters.SearchFilter,filters.OrderingFilter) # 过滤 # filter_fields = (&#39;name&#39;, &#39;status&#39;) filterset_class = GameFilter # 搜索 search_fields = (&#34;name&#34;, &#34;status&#34;) #排序 #注意 filter_backends多了一个filters.OrderingFilter ordering_fields = [&#39;status&#39;, &#34;id&#34;, &#34;name&#34;] 降序 http://127.0.0.1:8000/api/v1/games/?ordering=-id # 根据id降序 升序 http://127.0.0.1:8000/api/v1/games/?ordering=status # 根据状态升序 ……
        </div>
        <p class="readmore"><a href="https://godl9211.github.io/posts/20-%E6%8E%92%E5%BA%8F/" target="_blank">Continue reading</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://godl9211.github.io/posts/19-%E6%90%9C%E7%B4%A2/" title="" target="_blank"></a>
            </h1>
        </header>
        


        <div class="post-content">
            搜索 SearchFilter可以搜索我们设置的参数
配置 from .custom_model_view_set import CustomModelViewSet from django_filters.rest_framework import DjangoFilterBackend from .custom_filter import GameFilter from rest_framework import filters class GameView(CustomModelViewSet): queryset = Game.objects.all() serializer_class = GameSerializer filter_backends = (DjangoFilterBackend, filters.SearchFilter) # 过滤 filter_fields = (&#39;name&#39;, &#39;status&#39;) filterset_class = GameFilter # 搜索 search_fields = (&#34;name&#34;, &#34;status&#34;) http://127.0.0.1:8000/api/v1/games/?search=天 ……
        </div>
        <p class="readmore"><a href="https://godl9211.github.io/posts/19-%E6%90%9C%E7%B4%A2/" target="_blank">Continue reading</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://godl9211.github.io/posts/18-%E8%BF%87%E6%BB%A4/" title="" target="_blank"></a>
            </h1>
        </header>
        


        <div class="post-content">
            过滤 一、利用get_queryset过滤 from .custom_model_view_set import CustomModelViewSet class GameView(CustomModelViewSet): queryset = Game.objects.all() serializer_class = GameSerializer def get_queryset(self): ordering = self.request.query_params.get(&#39;ordering&#39;) if not ordering: queryset = Game.objects.all() else: queryset = Game.objects.all().order_by(ordering) return queryset http://127.0.0.1:8000/api/v1/games/?ordering=-id 二、django-filter django-filter库包括一个DjangoFilterBackend类，它支持REST框架的高度可定制的字段过滤。
安装 pip install django-filter 官网和github https://django-filter.readthedocs.io/en/master/guide/rest_framework.html https://github.com/carltongibson/django-filter 安装 INSTALLED_APPS = [ &#34;&#34;&#34;&#34;&#34;&#34; django_filters, ] 全局配置 &#39;DEFAULT_FILTER_BACKENDS&#39;: ( &#39;django_filters.rest_framework.DjangoFilterBackend&#39;, ... ), 视图 from .custom_model_view_set import CustomModelViewSet from rest_framework import filters from django_filters.rest_framework import DjangoFilterBackend class GameView(CustomModelViewSet): queryset = Game.……
        </div>
        <p class="readmore"><a href="https://godl9211.github.io/posts/18-%E8%BF%87%E6%BB%A4/" target="_blank">Continue reading</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://godl9211.github.io/posts/17-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%94%E5%9B%9E%E5%93%8D%E5%BA%94/" title="" target="_blank"></a>
            </h1>
        </header>
        


        <div class="post-content">
            自定义返回响应 目前我们返回的数据样式是这样
{ &#34;next&#34;: &#34;http://127.0.0.1:8000/api/v1/games/?cursor=cD0x&#34;, &#34;previous&#34;: null, &#34;results&#34;: [ { &#34;id&#34;: 1, &#34;name&#34;: &#34;老马&#34;, &#34;status&#34;: 0 } ] } 或
{ &#34;id&#34;: 1, &#34;name&#34;: &#34;老马&#34;, &#34;status&#34;: 0 } 还是那句话，返回这样格式的数据，对于移动端是不友好的，所以我们需要自定义返回消息，返回的结构如下
{ &#34;code&#34;: 200, &#34;message&#34;: &#34;success&#34;, &#34;data&#34;: [ { &#34;id&#34;: 1, &#34;name&#34;: &#34;老马&#34;, &#34;status&#34;: 0 } ], &#34;next&#34;: &#34;http://127.0.0.1:8000/api/v1/games/?cursor=cD0x&#34;, &#34;previous&#34;: null } 或者
{ &#34;code&#34;: 200, &#34;message&#34;: &#34;success&#34;, &#34;data&#34;: { &#34;id&#34;: 1, &#34;name&#34;: &#34;老马&#34;, &#34;status&#34;: 0 } } 自定义JSONResponse 创建一个custom_json_response.py文件
from django.utils import six from rest_framework.……
        </div>
        <p class="readmore"><a href="https://godl9211.github.io/posts/17-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%94%E5%9B%9E%E5%93%8D%E5%BA%94/" target="_blank">Continue reading</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://godl9211.github.io/posts/16-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8/" title="" target="_blank"></a>
            </h1>
        </header>
        


        <div class="post-content">
            自定义异常 目前我们返回的一些异常信息，长这个样子
{ &#34;detail&#34;: &#34;Authentication credentials were not provided.&#34; } 这样结构，对于移动端程序员是极其不友好的，所以我们一般给对方返回这样的数据结构
{ &#34;code&#34;: 401, &#34;message&#34;: &#34;Authentication credentials were not provided.&#34;, &#34;data&#34;: [] } 那我们就需要自己异常来捕获DRF里面的异常信息
创建custom_exception.py文件
from rest_framework.views import exception_handler def custom_exception_handler(exc, context): response = exception_handler(exc, context) if response is not None: response.data.clear() response.data[&#39;code&#39;] = response.status_code response.data[&#39;data&#39;] = [] if response.status_code == 404: try: response.data[&#39;message&#39;] = response.data.pop(&#39;detail&#39;) response.data[&#39;message&#39;] = &#34;未找到&#34; except KeyError: response.data[&#39;message&#39;] = &#34;未找到&#34; if response.status_code == 400: response.data[&#39;message&#39;] = &#39;输入错误&#39; elif response.……
        </div>
        <p class="readmore"><a href="https://godl9211.github.io/posts/16-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8/" target="_blank">Continue reading</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://godl9211.github.io/posts/15-api%E6%96%87%E6%A1%A3/" title="" target="_blank"></a>
            </h1>
        </header>
        


        <div class="post-content">
            API文档 DRF给我提供了自动生成API文档的功能，大大省去了写开发文档的时间。
pip install coreapi 路由 from rest_framework.documentation import include_docs_urls path(&#39;docs/&#39;, include_docs_urls(title=&#39;测试平台接口文档&#39;)) ……
        </div>
        <p class="readmore"><a href="https://godl9211.github.io/posts/15-api%E6%96%87%E6%A1%A3/" target="_blank">Continue reading</a></p>
    </article>
    
    
    
    <article class="post">
        <header>
            <h1 class="post-title">
                <a href="https://godl9211.github.io/posts/14-%E8%A7%86%E5%9B%BE%E9%9B%86%E5%92%8C%E8%B7%AF%E7%94%B1%E5%99%A8/" title="" target="_blank"></a>
            </h1>
        </header>
        


        <div class="post-content">
            视图集 我们在前面已经用了类视图，DRF给我了提供了更加抽象的封装，叫做ModelViewSet。
视图 class GameView(ModelViewSet): queryset = Game.objects.all() serializer_class = GameSerializer 路由 game_list = views.GameView.as_view({ &#39;get&#39;: &#39;list&#39;, &#39;post&#39;: &#39;create&#39; }) game_detail = views.GameView.as_view({ &#39;get&#39;: &#39;retrieve&#39;, &#39;put&#39;: &#39;update&#39;, &#39;patch&#39;: &#39;partial_update&#39;, &#39;delete&#39;: &#39;destroy&#39; }) path(&#39;games/&#39;, game_list, name=&#39;game-list&#39;), # 获取或创建 path(&#39;games/&lt;int:pk&gt;/&#39;, game_detail, name=&#39;game-detail&#39;), # 查找、更新、删除 路由器 我们可以通过Router类自动帮我们生成路由。
from rest_framework.routers import DefaultRouter # 创建路由器并注册我们的视图。 router = DefaultRouter() router.register(&#39;games&#39;, views.GameView) path(&#39;&#39;, include(router.urls)), 注意：去掉
from rest_framework.urlpatterns import format_suffix_patterns urlpatterns = format_suffix_patterns(urlpatterns, allowed=[&#39;json&#39;, &#39;api&#39;]) ……
        </div>
        <p class="readmore"><a href="https://godl9211.github.io/posts/14-%E8%A7%86%E5%9B%BE%E9%9B%86%E5%92%8C%E8%B7%AF%E7%94%B1%E5%99%A8/" target="_blank">Continue reading</a></p>
    </article>
    
    
    



<ol class="page-navigator">
    

    
    <li  class="current">
        <a href="https://godl9211.github.io/posts/">1</a>
    </li>
    
    <li >
        <a href="https://godl9211.github.io/posts/page/2/">2</a>
    </li>
    
    <li >
        <a href="https://godl9211.github.io/posts/page/3/">3</a>
    </li>
    

    
    <li class="next">
        <a href="https://godl9211.github.io/posts/page/2/">Next</a>
    </li>
    
</ol>



</div>

                    <footer id="footer">
    <div>
        &copy; 2023 <a href="https://godl9211.github.io/">My New Hugo Site By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>



<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>





                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='//www.google.com/search' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://godl9211.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>

    <section class="widget">
        <h3 class="widget-title">Latest articles</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://godl9211.github.io/posts/my-first-post/" title="My First Post" target="_blank">My First Post</a>
    </li>
    
    <li>
        <a href="https://godl9211.github.io/posts/01-restful-api/" title="RESTful API" target="_blank">RESTful API</a>
    </li>
    
    <li>
        <a href="https://godl9211.github.io/posts/00-%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" title="前后端分离" target="_blank">前后端分离</a>
    </li>
    
    <li>
        <a href="https://godl9211.github.io/posts/02-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" title="" target="_blank"></a>
    </li>
    
    <li>
        <a href="https://godl9211.github.io/posts/03-%E5%BA%8F%E5%88%97%E5%8C%96/" title="" target="_blank"></a>
    </li>
    
    <li>
        <a href="https://godl9211.github.io/posts/04-%E5%BA%8F%E5%88%97%E5%8C%96%E9%AB%98%E7%BA%A7/" title="" target="_blank"></a>
    </li>
    
    <li>
        <a href="https://godl9211.github.io/posts/05-%E5%BA%8F%E5%88%97%E5%8C%96%E9%AA%8C%E8%AF%81/" title="" target="_blank"></a>
    </li>
    
    <li>
        <a href="https://godl9211.github.io/posts/06-%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94/" title="" target="_blank"></a>
    </li>
    
    <li>
        <a href="https://godl9211.github.io/posts/07-%E7%B1%BB%E8%A7%86%E5%9B%BE/" title="" target="_blank"></a>
    </li>
    
    <li>
        <a href="https://godl9211.github.io/posts/08-%E8%AE%A4%E8%AF%81%E5%92%8C%E6%9D%83%E9%99%90/" title="" target="_blank"></a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>Categories</a></h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>Tags</a></h3>
<div class="tagcloud">
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">Meta</h3>
        <ul class="widget-list">
            <li><a href="https://godl9211.github.io/index.xml">RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>